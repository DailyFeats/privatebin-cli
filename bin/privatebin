#!/usr/bin/env node

const privatebinCli = require('commander');
const {
  privatebin
} = require('../lib/privatebin');

privatebinCli
  .version('0.0.1')
  .option('-u, --url <string>', 'PrivateBin host', 'https://privatebin.net')
  .option('-t, --text <string>', 'Text to paste')
  .option('-e, --expire <string>', 'Paste expire time [5min, 10min, 1hour, 1day, 1week, 1month, 1year, never]', '1week')
  .option('--burnafterreading', 'PrivateBin host', false)
  .option('--opendiscussion', 'PrivateBin host', false)
  .parse(process.argv);

const pasteData = Buffer.from(JSON.stringify({
  paste: privatebinCli.text
}), 'utf8');

privatebin(privatebinCli.url, pasteData, '', {
    expire: privatebinCli.expire,
    burnafterreading: privatebinCli.burnafterreading,
    opendiscussion: privatebinCli.opendiscussion,
  }).then(paste => console.log(paste))
  .catch(error => console.error(error));